import{j as e,L as o,c as u,r as h,d as x}from"./index-8YLEdGs1.js";import{T as j,G as f}from"./topBar-zmshjc-P.js";import{S as p,M as g}from"./MoreIcon-DsXyULJE.js";import{a as l}from"./apiRequest-njWK2yRt.js";import{u as c,f as v}from"./index-_Q_tgacs.js";import{I as d}from"./Image-DQcIMa54.js";import{u as N}from"./useMutation-Byz1H3N2.js";import"./authStore-BvNQ3nRy.js";function w(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-pinterest",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M8 0a8 8 0 0 0-2.915 15.452c-.07-.633-.134-1.606.027-2.297.146-.625.938-3.977.938-3.977s-.239-.479-.239-1.187c0-1.113.645-1.943 1.448-1.943.682 0 1.012.512 1.012 1.127 0 .686-.437 1.712-.663 2.663-.188.796.4 1.446 1.185 1.446 1.422 0 2.515-1.5 2.515-3.664 0-1.915-1.377-3.254-3.342-3.254-2.276 0-3.612 1.707-3.612 3.471 0 .688.265 1.425.595 1.826a.24.24 0 0 1 .056.23c-.061.252-.196.796-.222.907-.035.146-.116.177-.268.107-1-.465-1.624-1.926-1.624-3.1 0-2.523 1.834-4.84 5.286-4.84 2.775 0 4.932 1.977 4.932 4.62 0 2.757-1.739 4.976-4.151 4.976-.811 0-1.573-.421-1.834-.919l-.498 1.902c-.181.695-.669 1.566-.995 2.097A8 8 0 1 0 8 0"})})}const y=({userId:r})=>{const{isPending:n,error:t,data:i}=c({queryKey:["boards",r],queryFn:()=>l.get(`/boards/${r}`).then(s=>s.data)});return n?"Loading...":t?"There is an error !"+t.message:i?e.jsx("div",{className:"boards",children:e.jsx("div",{className:"items",children:i==null?void 0:i.map(s=>e.jsxs(o,{to:`/search?boardId=${s._id}`,className:"item",children:[e.jsx(d,{path:s.fristPin.media,w:372,alt:"logo"}),e.jsx("h2",{className:"header",children:s.title}),e.jsxs("p",{className:"desc",children:[s.pinCount," Pins . ",v(s.craetedAt)]})]},s._id))})}):"Pin not found!"},P=async r=>(await l.post(`/users/follow/${r}`)).data;function C({isFollowing:r,username:n}){const t=u(),i=N({mutationFn:P,onSuccess:()=>{t.invalidateQueries({queryKey:["profile",n]})}});return e.jsx("button",{onClick:()=>i.mutate(n),disabled:i.isPending,className:"follow-button",children:r?"Unfollow":"Follow"})}const B=()=>{const[r,n]=h.useState(null),{username:t}=x(),{isPending:i,error:s,data:a}=c({queryKey:["profile",t],queryFn:()=>l.get(`/users/${t}`).then(m=>m.data)});return i?"Loading...":s?"There is an error !"+s.message:a?e.jsx("div",{className:"profile-page",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"top-bar",children:e.jsx(j,{})}),e.jsxs("div",{className:"profile-info",children:[e.jsx("div",{className:"img",children:e.jsx(d,{w:60,h:60,path:a.img||"/pinterest/user/avatar.png"})}),e.jsx("h1",{className:"name",children:a.name||a.username}),e.jsx("div",{className:"pinterestIcon",children:e.jsxs(o,{children:[" ",e.jsx(w,{})," pinterestIcon"]})}),e.jsxs("p",{className:"followers-count",children:[a.followerCount," Followers . ",a.followingCount," Following"]})]}),e.jsxs("div",{className:"details",children:[e.jsx(o,{className:"share-icon",children:e.jsx(p,{})}),e.jsx(o,{className:"message",children:"Message"}),e.jsx(C,{isFollowing:a.isFollowing,username:a.username}),e.jsx(o,{className:"more",children:e.jsx(g,{})})]}),e.jsxs("div",{className:"saved-created",children:[e.jsx("div",{onClick:()=>n("created"),className:r==="created"?"active":"created",children:"Created"}),e.jsx("div",{onClick:()=>n("saved"),className:r==="saved"?"active":"saved",children:"Saved"})]}),e.jsx("div",{className:"gallery-boards",children:r==="created"?e.jsx(f,{userId:a._id}):e.jsx(y,{userId:a._id})})]})}):"Pin not found!"};export{B as default};
